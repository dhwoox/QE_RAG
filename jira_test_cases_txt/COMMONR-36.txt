■ 이슈 키: COMMONR-36
■ 제목: 인증 - 관리자 권한별 메뉴 진입 인증(UI지원장치)
============================================================

■ 테스트 스텝

[Step 1]
스텝 (Step)
1. Device> 장치관리자 설정

데이터 (Data)
> 전체 관리자
> 사용자 관리자
> 설정 관리자

{panel:title=지원 장치}
||장치||버전||일정||
|BS2|V1.8.0|2019 상반기|
|BSA2|V1.7.0|
|BSL2|V1.5.0|
|BLN2|V1.2.0|
|FS2|V1.3.0|
|FL|V1.0.1|

|FSF2|V1.0.0|2020 상반기|
{panel}

예상 결과 (Expected Result)
사용자가 선택한 관리자로 설정되어야 한다.
> 관리자에 대해 총 10명으로 제한(Old Version)
  ex) 전체관리자 10명을 만들경우 다른 관리자에 대해 설정할 수 없음.
> 관리자에 대해 총 1000명으로 제한(New Version)
------------------------------------------------------------
[Step 2]
스텝 (Step)
1. Device> 전체관리자 미설정
2. 사용자 관리자 & 설정관리자 설정
3. 설정한 관리자 및 일반 사용자로 메뉴진입시도

데이터 (Data)
N/A

예상 결과 (Expected Result)
1. 전체 관리자가 없는 상태에서 사용자/설정 관리자로 메뉴진입시도시 바로 메뉴진입이 가능해야 한다.
2. 일반 사용자로 메뉴 진입 가능해야 한다.
------------------------------------------------------------
[Step 3]
스텝 (Step)
1. Device> 전체관리자 설정
2. 사용자 관리자 & 설정관리자 설정
3. 설정한 관리자로 메뉴진입시도

데이터 (Data)
N/A

예상 결과 (Expected Result)
인증모드와 상관없이 지문(얼굴)/카드(QR)/ID+PIN 인증으로만 동작되어야 한다.
> 관리자 로그가 남는다.

※ FaceStation2
> Face/Card/ID 인증으로 Admin Menu 진입이 되어야 한다.
※ FaceStation F2
> Face/Finger/Card/ID 인증으로 Admin Menu진입이 되어야 한다.
------------------------------------------------------------
[Step 4]
스텝 (Step)
1. Device> 전체관리자 설정
2. 일반 관리자 설정
3. 일반 사용자로 메뉴진입시도

데이터 (Data)
BLN Only

예상 결과 (Expected Result)
일반 사용자로 메뉴진입시도시 메뉴진입이 불가능해야 한다.
------------------------------------------------------------
[Step 5]
스텝 (Step)
1. Device> 전체관리자 설정
2. 일반 사용자 설정
3. 일반 사용자로 메뉴진입시도

데이터 (Data)
Station Only

예상 결과 (Expected Result)
일반 사용자로 메뉴진입시도시 진입시도한 사용자의 로그가 표시되어야 한다.
------------------------------------------------------------
[Step 6]
스텝 (Step)
1. Device> 전체관리자 설정
2. 전체 관리자로 메뉴진입시도
3. 인증결과 출력유무 확인

데이터 (Data)
메뉴진입시도 인증
=> Card(QR)/ID+PIN/Face/Finger

예상 결과 (Expected Result)
1. 모든 메뉴에 대해 표시가 되어야 한다.
2. Admin Menu 진입 로그를 확인한다.
3. 관리자로 메뉴진입시 인증결과를 출력하지 않는다.
------------------------------------------------------------
[Step 7]
스텝 (Step)
1. Device> 전체관리자 설정
2. 사용자 관리자 설정
3. 설정한 관리자로 메뉴진입시도
4. 인증결과 출력유무 확인

데이터 (Data)
메뉴진입시도 인증
=> Card(QR)/ID+PIN/Face/Finger

예상 결과 (Expected Result)
1. 사용자, 로그 메뉴에 대해 표시가 되어야 한다.
2. Admin Menu 진입 로그를 확인한다.
> Card(QR)/ID+PIN/Face/Finger
3. 관리자로 메뉴진입시 인증결과를 출력하지 않는다.
------------------------------------------------------------
[Step 8]
스텝 (Step)
1. Device> 전체관리자 설정
2. 설정 관리자 설정
3. 설정한 관리자로 메뉴진입시도
4. 인증결과 출력유무 확인

데이터 (Data)
메뉴진입시도 인증
=> Card(QR)/ID+PIN/Face/Finger

예상 결과 (Expected Result)
1. 인증, 근태, 화면/소리, 장치, 통신, 로그 메뉴에 대해 표시가 되어야 한다.
2. Admin Menu 진입 로그를 확인한다.
> Card(QR)/ID+PIN/Face/Finger
3. 관리자로 메뉴진입시 인증결과를 출력하지 않는다.
------------------------------------------------------------
[Step 9]
스텝 (Step)
<전체관리자로 설정할 사용자가 서버&장치에 저장된 상태>

1. Device> 전체관리자 설정> Apply
2. 단말기 메뉴진입 시도
3. Device> 장치선택> Manage users in device> 전체관리자로 설정된 사용자 삭제
4. 단말기 메뉴진입 시도

데이터 (Data)
Station & BLN에 해당되는 TC

예상 결과 (Expected Result)
1. 전체관리자가 설정되어 있는 경우 전체관리자 인증 후 메뉴진입가능(Step 2 해당)
2. 전체관리자가 삭제되었으므로 관리자 인증을 거치지 않고 바로 단말기 메뉴진입가능(Step 4 해당)
------------------------------------------------------------
[Step 10]
스텝 (Step)
1. Device> 장치상세정보> Admin 관리자 & User 관리자 & Cofig 관리자 설정
2. 장치에서 User 관리자로 메뉴진입
3. 사용자> 사용자 리스트에서 관리자만 선택> 삭제 시도

데이터 (Data)
N/A

예상 결과 (Expected Result)
1. 관리자 삭제없이 성공팝업 발생한다.
> N2/FL : 삭제 불가능, 성공 팝업 미발생, 전체 삭제/개별 삭제 방식
> F2 : 전체 사용자 삭제 시 권한 문제로 삭제 불가능, 사용자 개별 선택 후 삭제 시 일반 사용자만 삭제
> L2의 경우 해당TC 미진행(BLIIR-116에서 따로관리)
------------------------------------------------------------
[Step 11]
스텝 (Step)
1. Device> 장치상세정보> Admin 관리자 & User 관리자 & Cofig 관리자 설정
2. 장치에서 User 관리자로 메뉴진입
3. 사용자> 관리자+일반사용자 개별선택> 삭제 시도

데이터 (Data)
N/A

예상 결과 (Expected Result)
1. 관리자는 삭제되지 않고 일반사용자만 삭제된다.
> N2/FL : 관리자는 삭제 불가능, 성공 팝업 미발생. 전체 삭제/개별 삭제 방식
> F2 : 전체 사용자 삭제 시 권한 문제로 삭제 불가능, 사용자 개별 선택 후 삭제 시 일반 사용자만 삭제
> L2의 경우 해당TC 미진행(BLIIR-116에서 따로관리)
------------------------------------------------------------
[Step 12]
스텝 (Step)
1. Device> 장치상세정보> Admin 관리자 & User 관리자 & Cofig 관리자 설정
2. 장치에서 User 관리자로 메뉴진입
3. 사용자> 사용자 전체선택 버튼을 이용해 전체삭제 시도

데이터 (Data)
A2/FS2

예상 결과 (Expected Result)
1. 관리자와 일반사용자가 혼합되어 저장된 경우 전체 선택 시 선택이 가능하고, 동작은 각 레벨에 맞게 동작한다.
------------------------------------------------------------
[Step 13]
스텝 (Step)
1. Device> 장치상세정보> Admin 관리자 & User 관리자 & Cofig 관리자 설정
2. 장치에서 User 관리자로 메뉴진입
3. 사용자> 사용자 전체선택> 삭제 시도

데이터 (Data)
BS2a/BS2/L2/N2/FL/XS2

예상 결과 (Expected Result)
1. 삭제시도시 Delete Failed로 동작한다.
> XS2 - Permission denied
> XS2 - 개별로 전체 선택 시 전체 성공 메시지 팝업(일반 사용자를 제외한 권한의 사용자는 유지)
2. BS2 확인필요
> L2의 경우 해당TC 미진행(BLIIR-116에서 따로관리)
> BS2a : Delete User, F3 기능 비활성화로 동작 안함
------------------------------------------------------------
[Step 14]
스텝 (Step)
1. 관리자 설정
2. 인증서&Data 암호화 설정
3. 메뉴진입시도

데이터 (Data)
N/A

예상 결과 (Expected Result)
1. 설정된 Admin 권한으로 메뉴진입이 되어야 한다.
* 해시키 수동관리 설정 시 장치에 사용자 재설정 후 확인
------------------------------------------------------------
[Step 15]
스텝 (Step)
1. 관리자 설정/미설정
2. 메뉴 진입 상태 > 인증 
3. 메뉴 진입 시도와 동시에 인증 시도

데이터 (Data)
N/A

예상 결과 (Expected Result)
1. 설정된 Admin 권한으로 메뉴진입이 되어야 한다.
> 메뉴 진입 후 인증 동작이 안되는 지 확인(FISF-1548)
2. 관리자 미설정 상태에서 인증 시 메뉴 진입 시도로 인증 동작 안되는 지 확인한다.
> 타이밍 상 발생할 수도 있으나, 대부분 인증 동작이 안되는 지 확인(FISF-1548)
------------------------------------------------------------
[Step 16]
스텝 (Step)
1. Device> 전체관리자 설정
2. 전체 관리자로 장치 메뉴버튼 클릭
3. ID 버튼 클릭> ID 입력 미입력에 대한 동작확인

데이터 (Data)
N/A

예상 결과 (Expected Result)
1. ID 입력화면에서 ID 미입력시 Menu Timeout 후 메인화면으로 이동된다.

※ [FISF-2200]
------------------------------------------------------------
[Step 17]
스텝 (Step)
1. Device> 전체관리자 설정
2. 전체 관리자로 장치 메뉴버튼 클릭
3. ID 버튼 클릭> ID 입력 후 PIN 미입력에 대한 동작확인

데이터 (Data)
N/A

예상 결과 (Expected Result)
1. ID 입력 후 PIN 입력화면에서 미입력 시 Auth Timeout을 따른다.

※ [FISF-2200]
------------------------------------------------------------
