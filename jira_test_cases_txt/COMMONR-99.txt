■ 이슈 키: COMMONR-99
■ 제목: 인증 - 위조지문감지(Live Finger Detection)
■ 설명: 위조지문 감지 설정 및 인증 동작에 이상이 없는지 확인 

=: LFD 지문 추출 과정에 지문을 때었을 때, 재시도 하도록 안내 메시지 필요
=: 위조 지문으로 검출 되었을 때, 관리자가 이를 인지하고 Action을 취할 수 있도록 기능 제공 필요
=: Fake Finger Detected - 서로 전달하는 경우는 위조 지문으로만 연속 입력 3회나, 누적으로 3회 시(실지문이 입력되는 경우, 누적은 초기화 됨)

지문을 빨리 뗀 경우 아래 메세지 표시(기존 "Try Again" 표시되는 상황)
->지문 스캔이 완료될 때까지 손가락을 떼지 마십시오. / Do not remove the finger until it is scanned.
위조지문 검출 시 UI에서는 인증 실패로 처리(위조지문 검출로 표시 하지 않음)
-> 별도 위조 지문 검출 메시지 표시 하지 않는 이유는 
위조 지문 시도하는 사람이 인식하지 못하도록 하며, 실제로 메시지를 보여도
인증 성공률 개선에는 도움이 될 것으로 보이지 않음 
-> 인증 실패로 처리에 따라 유저 스스로 입력 위치 조정 가능 할 것으로 보임
위조지문 Level 에 따라 위조 지문 연속 입력 횟수를 달리함
-> Strict -> 3번의 위조 지문 입력시 검출 로그 생성 
-> More Strict & Most Strict -> 5 번의 위조 지문 입력시 검출 로그 생성
이유는 LFD 성능의 불확실성으로 실지문 오인식 방지 차원 
추후 검토 - 별도 옵션을 통해 연속 입력 횟수 변경 설정 지원 
-> 별도 Time Out은 두지 않음 
이유는 Time Out 으로 위조 지문 검출하지 못하는 것에도 한계가 있음
위조지문 검출 로그 저장시 매칭수행하여 성공한 경우에 해당 사용자의 ID도 같이 저장(매칭 수행 기능은 서버 매칭인 경우에는 지원하지 않음)
지문 등록 중에 위조지문이 검출될 경우 출입거부 로그는 저장하지 않고 위조 지문 검출 로그 저장
1:1 인증 중에도 위조 지문이 입력되면 위조지문 검출루틴이 적용됨(카드+PIN 인증 중에 입력된 위조지문에 대해서는 위조지문 처리 루틴이 적용됨)
============================================================

■ 테스트 스텝

[Step 1]
스텝 (Step)
1. DEVICE > 장치 선택 > Authentication > Fingerprint > Fingerprint LFD 설정 > Apply

데이터 (Data)
*Master, Slave 모두 확인

1. Fingerprint LFD
> Not Use
> Strict
> More Strict
> Most Strict

예상 결과 (Expected Result)
1. 설정한 값이 저장된다.
2. 서버매칭 지원한다.
> BEWIIFWDI-263 참고
------------------------------------------------------------
[Step 2]
스텝 (Step)
1. Fingerprint LFD 설정
2. 위조지문으로 인증시도
3. UI상 출력되는 문구 확인

데이터 (Data)
1. Fingerprint LFD
> Not Use
> Strict
> More Strict
> Most Strict

예상 결과 (Expected Result)
1. Not Use: 위조지문으로 동작하지 않는다.
2. Not Use 외 설정: 위조지문으로 인증시 인증 실패가 발생해야 한다.
> 지문 추출 과정 중 빨리 때었을 때, 재시도 안내 표시 : “위조 지문 여부를 검사하고 있습니다. LED 빛이 끝날 때 까지 지문을 입력하세요”출력 - 미구현 상태

※ LCD가 없는 장치의 경우 지문 추출 과정 중 빨리 때었을 때, 아무런 Action이 발생하지 않는다.
------------------------------------------------------------
[Step 3]
스텝 (Step)
1. Fingerprint LFD 설정
2. 인증모드 설정
3. 위조지문으로 인증시도

데이터 (Data)
*Master, Slave 모두 확인

1. 인증모드
> 개인인증모드

2. Fingerprint LFD
> Strict
> More Strict
> Most Strict

예상 결과 (Expected Result)
1. 위조지문으로 인증시 인증 실패가 발생해야 한다.

[바이오스타 로그]
> Strict의 경우 Authentication Failed(Bad Fingerprint Placement) 3회 출력 후  Fake Fingerprint Detected 출력
> More/Most Strict의 경우 Authentication Failed(Bad Fingerprint Placement) 5회 출력 후  Fake Fingerprint Detected 출력

[장치 로그]
> Strict의 경우 화면에는 Access Denied 3회 발생 후 Fake Finger Detected 출력 : Event Log - Fake Finger Detected 3회 발생 후 Access Denied 1회 발생

> More /Most Strict의 경우 화면에는 Access Denied 5회 발생 후 Fake Finger Detected 출력 : Event Log - Fake Finger Detected 5회 발생 후 Access Denied 1회 발생
------------------------------------------------------------
[Step 4]
스텝 (Step)
[Door_이중인증 설정된 상태]
1. Fingerprint LFD 설정
2. 이중인증 설정된 장치에 인증시도

데이터 (Data)
*Master, Slave 모두 확인

1. Fingerprint LFD
> Strict
> More Strict
> Most Strict

예상 결과 (Expected Result)
1. 위조지문으로 인증시 인증 실패가 발생해야 한다.

[바이오스타 로그]
> Strict의 경우 Authentication Failed(Bad Fingerprint Placement) 3회 출력 후  Fake Fingerprint Detected 출력
> More/Most Strict의 경우 Authentication Failed(Bad Fingerprint Placement) 5회 출력 후  Fake Fingerprint Detected 출력

[장치 로그]
> Strict의 경우 화면에는 Access Denied 3회 발생 후 Fake Finger Detected 출력 : Event Log - Fake Finger Detected 3회 발생 후 Access Denied 1회 발생

> More /Most Strict의 경우 화면에는 Access Denied 5회 발생 후 Fake Finger Detected 출력 : Event Log - Fake Finger Detected 5회 발생 후 Access Denied 1회 발생
------------------------------------------------------------
[Step 5]
스텝 (Step)
1. Fingerprint LFD 설정
2. 사용자 추가> 지문입력시 위조지문으로 입력시도

데이터 (Data)
*Master, Slave 모두 확인

1. Fingerprint LFD
> Not Use
> Strict
> More Strict
> Most Strict

예상 결과 (Expected Result)
1. Not Use 설정시 위조 지문에 영향 없이 정상적으로 지문 등록이 된다.
2. Not Use 제외 설정 후 위조지문으로 등록 시 지문 입력 실패가 발생한다.
> 지문 추출 과정 중 빨리 때었을 때, 재시도 안내 표시 : “위조 지문 여부를 검사하고 있습니다. LED 빛이 끝날 때 까지 지문을 입력하세요”- 미구현 상태
> 지문 등록 중 위조 지문 검출 시 :  출입거부 로그는 저장하지 않고 위조 지문 검출 로그 저장
> FSF2(S) 위조 지문 스캔 시 FSF2(M)에 Extract Fail 팝업
> Fake Finger Detected (BioStar 미표시)
: Authentication failed (Bad fingerprint placement) 저장
> Fake Finger Detected (장치 로그)
: Strict의 경우 위조지문 3회이상 입력시 해당 로그 출력
: More /Most Strict의 경우 위조지문 5회이상 입력시 해당 로그 출력
3. 위조 지문 설정이 지문 스캔 속도에 영향이 없어야 한다.
------------------------------------------------------------
[Step 6]
스텝 (Step)
1. Fingerprint LFD 설정
2. 실제 LFD 동작여부를 확인
3. LFD를 설정한 장치를 재부팅한다.
4. 재부팅 후 LFD 설정이 저장되어 있는지 확인 후 해당 동작 확인.

데이터 (Data)
*Master, Slave 모두 확인

1. Fingerprint LFD
> Not Use
> Strict
> More Strict
> Most Strict

예상 결과 (Expected Result)
1. Not Use 설정시 위조 지문에 영향 없이 정상적으로 지문 등록이 된다.
2.[Not Use 제외 설정] 위조지문으로 등록 후 인증 시도 시지문 입력 실패가 발생한다.
 > 지문 등록 중 위조 지문 검출 시 :  출입거부 로그는 저장하지 않고 위조 지문 검출 로그 저장
> FSF2(S) 위조 지문 스캔 시 FSF2(M)에 Extract Fail 팝업
 > Fake Finger Detected (BioStar 미표시)
 : Authentication failed (Bad fingerprint placement) 저장
 > Fake Finger Detected (장치 로그)
 : Strict의 경우 위조지문 3회이상 입력시 해당 로그 출력
 : More /Most Strict의 경우 위조지문 5회이상 입력시 해당 로그 출력
 3. 위조 지문 설정이 지문 스캔 속도에 영향이 없어야 한다.
------------------------------------------------------------
