■ 이슈 키: COMMONR-220
■ 제목: 구역 - Muster Zone
■ 설명: - 긴급 상황 발생시 사용자들이 특정 지역에 위치하였는지 확인하기 위한 기능이다.
- 해당 기능을 응용하여 특정 구역 내 인원 수 및 명단을 모니터링 하는 목적으로도 사용된다.
- 특히 유저가 특정 위험 구역에서 장시간 체류하는 경우 알람 및 경보를 발생하여 조치를 취할 수 있도록 사용된다.

※ Global만 지원되므로 Device에서는 Alarm 관련된 동작에 대해서만 확인필요
> 장기체류 알람
> Alarm Clear에 대한 동작개선(Global일 때) - Test 진행하면서 TC는 계속 Update될 예정.
   : 지금까지는 A라는 장치가 TriggerAction으로도 발생하고 Alarm으로도 울리고 있는 상태에서 Alarm Clear시 TriggerAcion으로 발생중이던 것도 Clear되는 구조였음.
   => Global Zone에 설정되어 Alarm이 발생되는 Port만 Clear되도록 개선.(다른 Global Zone의 Alarm에 대해서도 적용되어짐)

- 2017 2H 이전 버전들과는 하위호환이 되지 않는다. - 고객에 Noti예정
> 이전 버전들의 장치들로 Muster Zone 구성> Alarm 발생시 Zone Status에서 Alarm Clear되지 않는다.(=Alarm이 계속 발생)

※ 이전버전
: Entry Device
: A2 v1.0.0 ~ v1.4.0 
: BS2 v1.0.0 ~ v1.5.0
: FS2 v1.0.0 ~ v1.0.3
: W2 v1.0.0 ~ v1.1.5
: L2 v1.0.0 ~ v1.2.4
: P2/R2 v1.0.0
: CS40 v1.0.0
============================================================

■ 테스트 스텝

[Step 1]
스텝 (Step)
1. Muster Zone 생성
2. Device/Access Group/최대 체류시간 설정
3. Alarm 설정
4. 최대 체류시간 초과시 Alarm 동작 확인

데이터 (Data)
Alarm: Output설정
> (Relay 지원하는) 모든 장치
> Port/Signal Setting

예상 결과 (Expected Result)
1. 설정한 체류시간를 초과해 체류할 경우 설정한 Output Signal이 발생한다.
------------------------------------------------------------
[Step 2]
스텝 (Step)
1. Muster Zone 생성
2. Device/Access Group/최대 체류시간 설정
3. Alarm 설정
4. 최대 체류시간 초과시 Alarm 동작 확인

데이터 (Data)
Alarm: Sound 설정
> (Sound/Buzzer 지원하는) 모든 장치

예상 결과 (Expected Result)
1. 설정한 체류시간를 초과해 체류할 경우 설정한 Buzzer/Sound가 발생한다.
------------------------------------------------------------
[Step 3]
스텝 (Step)
1. Muster Zone 생성
2. Device/Access Group/최대 체류시간 설정
3. Alarm 설정
4. Trigger&Action 발생
5. Muster Zone Alarm 발생
6. Monitoring> Zone Status> Muster Zone Clear

데이터 (Data)
Alarm: Output 설정
> Relay Port가 다중지원인 Device
: CS40
: A2

Trigger&Action 설정
> Muster Zone Alarm에 설정한 장치의 Output Port와 중복되지 않게 설정

예상 결과 (Expected Result)
1. Muster Zone Alarm에 대해서만 Clear된다.
2. Trigger&Action으로 발생되던 Output은 계속 발생된다.
------------------------------------------------------------
[Step 4]
스텝 (Step)
1. Muster Zone 생성
2. Device/Access Group/최대 체류시간 설정
3. Alarm 설정
4. Trigger&Action 발생
5. Muster Zone Alarm 발생
6. Monitoring> Zone Status> Muster Zone Clear

데이터 (Data)
Alarm: Output 설정

Trigger&Action 설정
> Muster Zone Alarm에 설정한 장치의 Buzzer or Sound로 설정

예상 결과 (Expected Result)
1. Muster Zone Alarm에 대해서만 Clear된다.
2. Trigger&Action으로 발생되던 Output은 계속 발생된다.
------------------------------------------------------------
[Step 5]
스텝 (Step)
1. Muster Zone 생성
2. Alarm 설정
3. FireAlarm Zone 생성
4. Alarm 설정
5. Muster Zone Alarm 발생
6. FireAlarm 발생
7. Zone Status에서 Muster Zone 선택 후 Alarm Clear

데이터 (Data)
Alarm: Output 설정
> A 장치의 Relay Port로 중복되게 설정
: Muster Zone Alarm- Port 0(Relay 0ff)
: FireAlarm- Port 0(Relay On)

예상 결과 (Expected Result)
1. 중복으로 설정된 경우 FireAlarm에 대해서도 Action Clear가 된다.
※ Global Alarm & FireAlarm의 Priority가 Urgent로 동일.
※ 중복으로 사용안하는게 맞는 동작이나 만약 중복으로 사용될 경우 위와같이 동작이 된다는 TC임
------------------------------------------------------------
[Step 6]
스텝 (Step)
1. Zone> Add Zone> Muster> Apply
2. Name 입력
3. Entry/Exit Device 설정
4. Access Group 설정
5. Max Time Limit(min.) 설정
6. 최대 체류시간 설정
3. Alarm 설정
4. Entry Device에 인증
5. 최대 체류시간 초과시 Alarm 동작 확인

데이터 (Data)
Max Time Limit(min.): 1/2160/4320 

Alarm: Output설정
> Relay 지원하는 장치
> Port/Signal Setting

예상 결과 (Expected Result)
1. 설정한 체류시간를 초과해 체류할 경우 설정한 Output Signal이 발생한다.
------------------------------------------------------------
