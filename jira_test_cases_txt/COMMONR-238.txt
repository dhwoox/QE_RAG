■ 이슈 키: COMMONR-238
■ 제목: Ethernet Zone - Fire Alarm Zone
■ 설명: Entrance Limit & Fire Alarm Zone
> 동일 Zone ID로 설정 가능 하나, 구성 시 비정상 종료 가능
> 동일 장치 ID로 서로 다른 Zone ID 구성 요청
> Master/Member - Master/Default 모드 장치만, Slave 제외

최신 FirmWare 지원 가능 SDK 필요
*{color:#d04437}> SDK> BSDemo.exe 필요{color}*

검증 범위 및 구성
TCP Listen Port : 51214(SDK Recommend)
Max Zone : 2개 확인(Master/Member, Member)
> 8개 설정 가능
> Master/Member 설정 가능
> 1개의 구역 : Max 64개 Reader 포함
> 스케줄 : Max 24 / 인증 가능 횟수 : Max 255
Fire Alarm Input Sensor : Member Only Setting
> Max 8개  
: All Member Door Open
: Fire Alarm On, Fire Alarm Event Log - Member
: Fire Alarm Log - Master
Clear Alarm : 정상 동작
Master Rebooting
: Door Unlock 유지
: Alarm 발생
Door - Member Only Setting
> Max 8개 
Max : 미확인
Master
> 검증용 Device(M)-P2/BS2/OM120(S)
Member
> 검증용 Device(M)

Test 진행 전 환경설정
> BioStar 를 이용해 User, Door, Access Group 사전 생성 및 장치 전송 
> Device Viewer를 통해 Door ID 및 Access Group ID 체크
> (바이오스타에 장치 추가된 상태) 바이오스타 설정 창에서 서버구동 Stop
============================================================

■ 테스트 스텝

[Step 1]
스텝 (Step)
1. SDK의 BSDemo.exe 실행
2. SSL 설치 여부 설정> No
> 기능 동작 확인으로 SSL 미설치
3. 검증용 Device 연결 화면 표시> 2 선택
> 장치의 IP/Port 입력

데이터 (Data)
BioStar 
> User, Door, Access Group 사전 생성 및 장치 전송 완료

예상 결과 (Expected Result)
1. SDK 연동으로 검증용 Device 연결이 된다.
> 미지원하는 장치는 연결 후 설정 시 'Can't connect to device(errorCode : BS_SDK_ERROR_CANNOT_FIND_DEVICE)' 발생함
------------------------------------------------------------
[Step 2]
스텝 (Step)
1. Device 연결 완료
2. Ethernet Zone Master Config 설정 화면 표시> 2 선택
> Ethernet Zone Master 입력

데이터 (Data)
BioStar 
> User, Door, Access Group 사전 생성 및 장치 전송 완료

예상 결과 (Expected Result)
1. Device Zone Master Config를 설정한다.
2. Device Zone Master Config 설정 유무 및 정보 확인은 1번을 선택한다.
> Enable : 1
Default : 0 (Disable)
> Listen Port : 51214
------------------------------------------------------------
[Step 3]
스텝 (Step)
1. Device 연결 완료
2. Ethernet Zone Config 설정 화면 표시> 4 선택
> Fire Alarm Zone 입력

데이터 (Data)
BioStar 
> User, Door, Access Group 사전 생성 및 장치 전송 완료

예상 결과 (Expected Result)
1. Device Zone Config를 설정한다.
> Fire Alarm Zone
2. 각 항목 입력 및 선택 한다.
> 동일 장치 ID로 Master/Member 설정 가능
3. Device Zone Fire Alarm Zone 설정 유무 및 정보 확인은 3번을 선택한다.
------------------------------------------------------------
[Step 4]
스텝 (Step)
<장치간 RS485 연결/TCP 연결 => Door 구성>
1. Device Zone> Fire Alarm Zone
2. 각각의 항목 설정 후 저장
3. Member의 Fire Alarm Input Sensor 접지> Fire Alarm 발생
4. Master 장치 Reboot 시도> Reboot 후 동작 확인

데이터 (Data)
BioStar 
> User, Door, Access Group 사전 생성 및 장치 전송 완료

예상 결과 (Expected Result)
1. FireAlarm이 발생된 경우, FireAlarm Zone에 설정된 출입문들에 대해 Unlocked 상태로 동작되어야 한다.
> Event - Fire Alarm, Alarm, Unlocked
2. Master가 재부팅 되는 경우, Fire Alarm은 유지 되어야 한다.
> 발생되고 있는 Alarm Action 유지
> Unlock 유지
------------------------------------------------------------
[Step 5]
스텝 (Step)
<장치간 RS485 연결/TCP 연결 => Door 구성>
1. Device Zone> Fire Alarm Zone
2. 각각의 항목 설정 후 저장
3. Member의 Fire Alarm Input Sensor 접지> Fire Alarm 발생
4. Clear Alarm 시도

데이터 (Data)
BioStar 
> User, Door, Access Group 사전 생성 및 장치 전송 완료

예상 결과 (Expected Result)
1. Fire Alarm이 해제되어야 하고, Locked 상태로 동작되어야 한다.
> Event - Clear Alarm, Locked
------------------------------------------------------------
